// تخزين أسماء اللاعبين
const players = [];
const roles = ["مافيا", "طبيب", "محقق", "مدني"];

// العناصر الرئيسية
const startButton = document.getElementById("start-button");
const playerSetupDiv = document.getElementById("player-setup");
const playerNameInput = document.getElementById("player-name");
const addPlayerButton = document.getElementById("add-player");
const playerList = document.getElementById("player-list");
const startGameButton = document.getElementById("start-game");
const gamePlayDiv = document.getElementById("game-play");
const roleImage = document.getElementById("role-image");
const roleName = document.getElementById("role-name");
const nextTurnButton = document.getElementById("next-turn");

// بدء اللعبة
startButton.addEventListener("click", () => {
    playerSetupDiv.style.display = "block";
    startButton.style.display = "none";
});

// إضافة لاعب
addPlayerButton.addEventListener("click", () => {
    const playerName = playerNameInput.value.trim();
    if (playerName) {
        players.push(playerName);
        const listItem = document.createElement("li");
        listItem.textContent = playerName;
        playerList.appendChild(listItem);
        playerNameInput.value = "";

        if (players.length >= 4) {
            startGameButton.disabled = false;
        }
    }
});

// بدء اللعبة الفعلية
startGameButton.addEventListener("click", () => {
    playerSetupDiv.style.display = "none";
    gamePlayDiv.style.display = "block";
    startTurn();
});

// بدء دور جديد
let currentPlayerIndex = 0;
function startTurn() {
    if (currentPlayerIndex >= players.length) {
        alert("انتهت اللعبة!");
        return;
    }

    const playerName = players[currentPlayerIndex];
    const role = roles[Math.floor(Math.random() * roles.length)];

    roleName.textContent = `${playerName}: ${role}`;
    updateRoleImage(role);

    roleImage.style.display = "block";
    nextTurnButton.style.display = "block";

    currentPlayerIndex++;
}

// تحديث صورة الدور
function updateRoleImage(role) {
    switch (role) {
        case "مافيا":
            roleImage.src = "images/Mafia.png";
            break;
        case "طبيب":
            roleImage.src = "images/Doctor.png";
            break;
        case "محقق":
            roleImage.src = "images/Investigator.png";
            break;
        case "مدني":
            roleImage.src = "images/Civilian.png";
            break;
        default:
            roleImage.src = "";
    }
}

// الانتقال إلى الدور التالي
nextTurnButton.addEventListener("click", () => {
    roleImage.style.display = "none";
    nextTurnButton.style.display = "none";
    startTurn();
});
